{"version":3,"sources":["../../src/pages/chat-home/chat-home.module.ts","../../src/pages/chat-home/chat-home.ts","../../src/assets/log/log-debug.js"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ChatHomePage } from './chat-home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChatHomePage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ChatHomePage)\r\n  ],\r\n})\r\nexport class ChatHomePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-home/chat-home.module.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { NavController, Events, Slides, IonicPage, NavParams, ToastController, Content } from 'ionic-angular';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\n\r\nimport { ApiAuthService } from '../../services/apiAuthService';\r\nimport { ApiStorageService } from '../../services/apiStorageService';\r\nimport chatConfig from '../../assets/chat/chat-config';\r\nimport Log from '../../assets/log/log-debug';\r\n\r\nvar slideSelected = {\r\n  home: 0,\r\n  chatting: 1,\r\n  create_group: 2,\r\n  setting: 3,\r\n}\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-chat-home',\r\n  templateUrl: 'chat-home.html'\r\n})\r\n\r\nexport class ChatHomePage {\r\n  @ViewChild(Slides) slides: Slides;\r\n\r\n  slideIndex = 0;\r\n  title = 'CHAT HOME';\r\n  image_default = './assets/imgs/group.jpeg';\r\n\r\n  message: string = '';\r\n\r\n  user = {\r\n    username: 'DINH',\r\n    image: 'https://cdn.pixabay.com/photo/2016/06/18/17/42/image-1465348_960_720.jpg',\r\n    nickname: 'nvdinh'\r\n  };\r\n  messages = [];\r\n  room: any;\r\n  rooms = [];\r\n\r\n  public addFromGroup: FormGroup;\r\n  public contentMessages;\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private apiService: ApiAuthService,\r\n    private events: Events,\r\n    private navCtrl: NavController,\r\n    private apiStorage: ApiStorageService) { }\r\n\r\n  ngOnInit() {\r\n    console.log('ngOnInit() - chat-home.ts!');\r\n\r\n    this.addFromGroup = this.formBuilder.group({\r\n      room_name: '',\r\n      image: '',\r\n      message: '',\r\n      time: ''\r\n    });\r\n\r\n    this.rooms = this.apiStorage.getUserRooms(this.user);\r\n\r\n    this.getRoomChating().subscribe(data => {\r\n      console.log('Observerable sau 5 giay: ', data);\r\n    })\r\n\r\n\r\n    //su dung truyen du lieu tu form a-->b ben fom b phai khai dung su kien thi moi\r\n    this.events.publish(chatConfig.event_register_room, { data: 'chat' });\r\n\r\n\r\n    //chuyen slide khi su kien click group\r\n    //nguoc lai lang nghe su kien cua form khac truyen cho minh bang lenh \r\n    this.events.subscribe(chatConfig.event_change_room, ((data) => {\r\n      console.log(\"Nhan tu form home: \" + JSON.stringify(data));\r\n    }));\r\n\r\n    this.events.subscribe(chatConfig.event_chat_setting, (() => {\r\n      this.goToSlide(slideSelected.setting);\r\n    }));\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad');\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    console.log('this.socket.disconnect()');\r\n  }\r\n\r\n  getRoomChating() {\r\n    let observable = new Observable(observer => {\r\n      setTimeout(() => {\r\n        observer.next({\r\n          room_id: 'testID',\r\n          room_name: 'testName',\r\n        });\r\n      }, 5000);\r\n    });\r\n    return observable;\r\n  }\r\n\r\n\r\n\r\n  goToSlide(i) {\r\n    if(i==0) this.title = \"CHAT HOME\";\r\n    this.slides.slideTo(i, 500);\r\n  }\r\n\r\n  slideChanged() {\r\n    this.slideIndex = this.slides.getActiveIndex();\r\n  }\r\n\r\n  formAddRoom() {\r\n    this.title = \"THÊM NHÓM\";\r\n    this.goToSlide(2);\r\n    this.addFromGroup = this.formBuilder.group({\r\n      room_name: '',\r\n      image: '',\r\n      message: '',\r\n      time: new Date().getTime()\r\n    });\r\n  }\r\n\r\n  goSetting(){\r\n    this.title = \"SETTING\";\r\n    this.goToSlide(3);\r\n  }\r\n\r\n  reset() {\r\n    location.href = '/';\r\n  }\r\n\r\n  selectIcon() {\r\n    //this.navCtrl.push(SampleIconsPage);\r\n    alert(\"selectIcon\");\r\n  }\r\n\r\n  callSendLog() {\r\n    Log.print();\r\n    //Log.get(); -->for send\r\n    Log.reset();\r\n  }\r\n\r\n  callLogout() {\r\n    this.apiService.logout()\r\n      .then(d => {\r\n        this.reset();\r\n      })\r\n      .catch(e => { });\r\n  }\r\n\r\n  goRoom(room) {\r\n    this.title = \"CHATTING\";\r\n    this.room = room;\r\n\r\n    this.messages = this.apiStorage.getUserRoomMessages(this.user, this.room);\r\n\r\n    this.goToSlide(slideSelected.chatting);\r\n  }\r\n  onSubmit() {\r\n    this.rooms.push({\r\n      name: this.addFromGroup.value.room_name,\r\n      image: this.addFromGroup.value.image,\r\n      message: this.addFromGroup.value.message,\r\n      time: this.addFromGroup.value.time,\r\n      messages: [],\r\n    });\r\n\r\n    this.apiStorage.saveUserRooms(this.user, this.rooms);\r\n\r\n    this.goToSlide(slideSelected.home);\r\n  }\r\n\r\n\r\n  sendMessage() {\r\n    this.messages.push({\r\n      user: { username: this.user.username, image: this.user.image, nickname: this.user.nickname },\r\n      text: this.message,\r\n      created: new Date().getTime()\r\n    });\r\n    \r\n    this.messages.push({\r\n      user: { username: 'CUONG', image: '', nickname: 'cuongdq' },\r\n      text: 'HII: ' + this.message,\r\n      created: new Date().getTime()\r\n    });\r\n\r\n    this.room.messages = this.room.messages.concat(this.messages);\r\n    \r\n    this.apiStorage.saveUserRoomMessages(this.user, this.room);\r\n\r\n    this.message = '';\r\n    this.room.messages = [];\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat-home/chat-home.ts","var log = '' //telemetry log\r\nvar trackingLog =  (s,o) => { log += Date.now() + ': ' + s + '\\n'; if(o)log += JSON.stringify(o)}\r\nvar printLog = ()=>{console.log(log)}\r\nvar getLog = () =>{return log}\r\nvar resetLog = ()=>{log=''}\r\nmodule.exports = {\r\n    put: trackingLog,\r\n    get: getLog,\r\n    print: printLog,\r\n    reset: resetLog,\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/log/log-debug.js\n// module id = 499\n// module chunks = 0"],"sourceRoot":""}